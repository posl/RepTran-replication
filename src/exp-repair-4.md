これに関するrepairの実験は全て `exp-repair-3-{実験サブID}` という形式でレポジトリに対応させる．
スクリプトのファイル名は `exp-repair-3-{実験サブID}-{スクリプトID}.py` とする．
これらのTODOは [[20250514亀井先生mtg]] を受けてまとめたもの．

> [!NOTE] このページでタスク管理風なこともしたい．
> 🥚 : 未着手
> 🏃 : 実行中
> 🏝️ : 実装は終わって実行待ち
> ✅ : 完了

# RQ2でやること：重み数を変更した場合のrepair性能
## モチベーション
RQ1ではArachneのオリジナルと公平に比較するために，重み数が $N_{avg}$ で固定だった．
なのでこのRQではその制約をとっぱらい，重み数を変えた実験をする．
## 重み数の設定方法
最終レイヤのFFN層の重み数は合計2x3072x768 = 4,718,592
これの0.01% = 471.8592なのでとりあえず472個にしてみる？
1%でも47,185.92なので少し多い．

| $r_{weight}$ | $N_{weight}$ |
| ------------:| ------------:|
|       0.005% |          236 |
|        0.01% |          472 |
|        0.02% |          944 |
|         0.1% |         4719 |
|           1% |        47186 |
上の表から，**0.005%, 0.01%, 0.02%** を採用するのが合理的な気がする．
1,000を超えると計算量的にrepairのユースケースと合わないかも．
## Arachneの変更
Paretoフロントを取らずスコアの平均を取ることで重み数をコントロールできるように改造したArachneを，ArachneV3と呼ぶ (arXiv, TOSEMがそれぞれV1, V2という想定)．

# `exp-repair-4-1`
## 目的
Ours, ArachneV3, Randomの3種類の手法を上の重み数の設定で実行する．
## ステップ
### ステップ1：FLの実行
Ours, ArachneV3のFLを実行して重み位置情報を保存．
- 該当スクリプト: `exp-repair-4-1-1.py`
### ステップ2：Repairの実行
各手法ごと，重み数ごとにrepairを回す．
### ステップ3：テストセットで評価してデータ記録

### ステップ4：記録したデータを図表にまとめて可視化